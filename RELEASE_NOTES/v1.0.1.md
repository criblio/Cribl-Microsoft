# Version 1.0.1 - Interactive Menu & Table Collision Fix
**Release Date:** 2024/09/18

## üéâ Overview
Version 1.0.1 introduces a new interactive menu interface for the DCR automation tools, fixes critical table name collision issues, and enhances the overall user experience with improved error handling and documentation.

## ‚ú® New Features

### Interactive Menu System
- **New user-friendly menu interface** in `Run-DCRAutomation.ps1`
- **Visual deployment options** with clear descriptions
- **Deployment confirmation prompts** before executing changes
- **Current configuration display** showing workspace, resource group, and DCR mode
- **Quick Deploy option** for rapid deployment using operational parameters
- **Numbered menu options** for easy selection (1-5, Q to quit)

### Enhanced User Experience
- **Guided deployment workflow** with step-by-step confirmations
- **Real-time configuration status** display in menu
- **Improved error messages** with actionable guidance
- **Better progress indicators** during deployment
- **Clear success/failure notifications** with emoji indicators

## üêõ Bug Fixes

### Critical: Table Name Collision Resolution
- **Fixed native/custom table conflicts** where custom tables with similar names (e.g., `CommonSecurityLog_CL`) would interfere with native table processing
- **Removed `_CL` variant checking** from native table mode to prevent collisions
- **Added collision detection warnings** when potential conflicts are detected
- **Improved table search logic** with mode-specific variant checking

### Schema Detection Improvements
- **Enhanced schema validation** to detect when wrong table type is retrieved
- **Added safety checks** for suspicious schema structures (e.g., standardColumns with only TenantId)
- **Better handling** of custom vs native table schema differences
- **Improved column property detection** with multiple fallback paths

## üîß Improvements

### Error Handling
- **Better table not found messages** showing exactly which variants were checked
- **Clearer warnings** when custom tables exist with similar names to native tables
- **Improved debug output** for troubleshooting schema retrieval issues
- **Enhanced error recovery** with user-friendly prompts for missing configurations

### Command-Line Interface
- **New `-NonInteractive` switch** for automation/scripting scenarios
- **Backward compatibility** maintained for existing command-line usage
- **Mode parameter** now required when using NonInteractive flag
- **Streamlined parameter handling** between interactive and non-interactive modes

### Documentation Updates
- **README.md updated** to highlight interactive menu as primary interface
- **QUICK_START.md rewritten** with menu-focused instructions
- **Visual menu examples** added to documentation
- **Quick Decision Guide** for choosing deployment options
- **Troubleshooting section** expanded with common menu issues

## üìù Changes to Existing Features

### Run-DCRAutomation.ps1
- **Default behavior changed** to launch interactive menu when run without parameters
- **Added menu display logic** with formatted output
- **Implemented confirmation system** for all deployment operations
- **Added wait prompts** between operations for better user control

### Create-TableDCRs.ps1
- **Modified `Get-LogAnalyticsTableSchema`** function to prevent table name collisions
- **Enhanced `Get-TableColumns`** function with better schema detection
- **Added collision detection** warnings throughout table processing
- **Improved debug output** for troubleshooting

## üöÄ Migration Guide

### For Existing Users
If you have existing scripts using the automation tools:

**Previous usage (still works):**
```powershell
.\Run-DCRAutomation.ps1 -Mode DirectBoth
```

**New interactive usage (default):**
```powershell
.\Run-DCRAutomation.ps1
# Then select option from menu
```

**Non-interactive usage (for automation):**
```powershell
.\Run-DCRAutomation.ps1 -NonInteractive -Mode DirectBoth
```

## üí° Best Practices

### Using the New Menu
1. **Always review configuration** displayed at menu startup
2. **Use Option 1 (Quick Deploy)** for first-time deployments
3. **Confirm selections** carefully before proceeding
4. **Check output** for any warnings or errors

### Avoiding Table Collisions
1. **Name custom tables distinctly** from native table names
2. **Use descriptive prefixes** for custom tables (e.g., `CustomSecurity_CL` instead of `CommonSecurityLog_CL`)
3. **Deploy native and custom tables separately** if conflicts exist
4. **Review debug output** if unexpected schemas are retrieved

## üìã System Requirements
No changes from v1.0.0

## üîí Security Notes
No changes from v1.0.0

## üìù Known Issues

- Custom tables with names very similar to native tables should be renamed to avoid confusion
- Menu display may not format correctly in terminals with width less than 60 characters
- PowerShell ISE may not display menu colors correctly (use PowerShell console or VS Code terminal)

## üôè Contributors

### This Release
- **Interactive menu system** implementation and UX improvements
- **Table collision bug fix** and enhanced error handling
- **Documentation updates** for improved user guidance

### Ongoing Contributors
- **Cam Borgal** - Original DCR table specific templates creation
- **James Pederson** - Direct DCR Templates and Automation script

## üîÑ What's Next

Planned features for future releases:
- Configuration wizard for first-time setup
- Batch deployment progress bars
- Export/import of deployment configurations
- Enhanced Cribl configuration validation
- Support for additional table types

## üìß Support

For issues, questions, or feature requests related to this release, please use the GitHub Issues section of this repository.

---

**Thank you for using Cribl-Microsoft integration tools!**
